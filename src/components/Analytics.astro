---
const GA_ID = 'G-0GG9VZJ9J4';
const isProduction = import.meta.env.PROD;

const gaScript = `
  console.log('âœ… Google Analytics script eseguito');
  window.dataLayer = window.dataLayer || [];
  function gtag(){ window.dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', '${GA_ID}');
`;

console.log('isProduction:', isProduction);
---

<!-- Mostro sempre questo per capire se il componente viene renderizzato -->
<div>Analytics component loaded. isProduction = {isProduction ? 'true' : 'false'}</div>

{isProduction && (
  <>
    <script async src={`https://www.googletagmanager.com/gtag/js?id=${GA_ID}`}></script>
    <script set:html={gaScript} />
  </>
)}
